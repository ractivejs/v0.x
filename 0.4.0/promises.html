<!doctype html>
<html lang='en-GB'>
<head>
	<meta charset='utf-8'>
	<meta http-equiv='X-UA-Compatible' content='IE=Edge,chrome=1'>

	<title> Promises | Docs | Ractive.js </title >

	<meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'>

	<link rel='icon' type='image/png' href='../assets/favicon.png'>
	<link rel='stylesheet' href='../min.css'>

	<!--[if lte IE 8]>
		<script src='../assets/respond.min.js'></script>
		<script src='../assets/html5shiv.min.js'></script>
	<![endif]-->

</head>

<body class='example'>

	<nav>
	<div class='nav-inner'>
		<a href='http://ractivejs.org'>Ractive.js</a>

		<ul>
			<li><a href='http://ractivejs.org/60-second-setup'>60 second setup</a></li>
			<li><a href='http://learn.ractivejs.org'>Tutorials</a></li>
			<li><a href='http://examples.ractivejs.org'>Examples</a></li>
			<li class="selected"><a href='http://docs.ractivejs.org'>Docs</a></li>
			<li><a href='http://docs.ractivejs.org/latest/plugins'>Plugins</a></li>
			<li><a href='http://blog.ractivejs.org'>Blog</a></li>
			<li class='github-small'><a href='https://github.com/ractivejs/ractive'>GitHub</a></li>
		</ul>

		<a class='github-wide' href='https://github.com/ractivejs/ractive'>GitHub</a>

		<button id='nav-toggle'>&#9776;</button>
	</div>
</nav>


	<main>
		<div class='content'>
			<header class='main-header'>
				<h1>Promises</h1>
				<a class='edit-link' href='https://github.com/ractivejs/docs.ractivejs.org/edit/master/docs/0.4.0/Promises.md.hbs'>edit this page</a>
			</header>

			<p>Several methods in Ractive - those which trigger changes to the view, which may or may not involve <a href="transitions">transitions</a> - return a &#39;promise&#39;. Those methods are:</p>
<ul>
<li><a href="ractive-add">ractive.add()</a></li>
<li><a href="ractive-animate">ractive.animate()</a></li>
<li><a href="ractive-merge">ractive.merge()</a></li>
<li><a href="ractive-reset">ractive.reset()</a></li>
<li><a href="ractive-set">ractive.set()</a></li>
<li><a href="ractive-subtract">ractive.subtract()</a></li>
<li><a href="ractive-teardown">ractive.teardown()</a></li>
<li><a href="ractive-toggle">ractive.toggle()</a></li>
<li><a href="ractive-update">ractive.update()</a></li>
</ul>
<p>The promise will fulfil <em>once there are no longer any active transitions resulting from the operation</em>.</p>
<p>Ractive implements the <a href="http://promises-aplus.github.io/promises-spec/">Promises/A+ spec</a> and exposes it as <code>Ractive.Promise</code>.</p>
<h3 id="what-is-a-promise-">What is a promise?</h3>
<p>Promises are a way to deal with asynchronous operations - that is, operations that don&#39;t complete immediately. Async operations are common in JavaScript, and that includes Ractive. The way to interact with a promise is with its <code>then()</code> method:</p>
<pre><code class="language-js">ractive.set( <span class="string">'foo'</span>, <span class="string">'bar'</span> ).then( <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="comment">// any transitions resulting from the set() operation have now completed</span>
    alert( <span class="string">'transitions complete!'</span> );
});

<span class="comment">// Even if there are no transitions, the promise will ALWAYS</span>
<span class="comment">// be fulfilled asynchronously - so this message will be</span>
<span class="comment">// alerted first in all cases</span>
alert( <span class="string">'synchronous alert'</span> );</code></pre>
<h2 id="what-s-wrong-with-callbacks-">What&#39;s wrong with callbacks?</h2>
<p>Nothing! Callbacks are a perfectly good way of handling asynchrony. But promises have a number of advantages:</p>
<h3 id="you-can-attach-multiple-fulfilment-handlers">You can attach multiple fulfilment handlers</h3>
<pre><code class="language-js"><span class="keyword">var</span> promise = ractive.set( <span class="string">'foo'</span>, <span class="string">'bar'</span> );

<span class="comment">// doSomething and doSomethingElse will execute once transitions are</span>
<span class="comment">// complete, in the order they are given here</span>
promise.then( doSomething );
promise.then( doSomethingElse );

<span class="comment">// Note that if doSomething is asynchronous and returns a promise of</span>
<span class="comment">// its own, you can chain operations efficiently:</span>
promise.then( doSomething ).then( doSomethingElse );</code></pre>
<h3 id="interoperability">Interoperability</h3>
<p>There are many different promise implementations (see below) but only one specification - <a href="http://promises-aplus.github.io/promises-spec/">Promises/A+</a>. Because of that, you can mix and match promises from different sources:</p>
<pre><code class="language-js">Promise.all([
  ajax.get( <span class="string">'list.json'</span> ),       <span class="comment">// loads our app data</span>
  ractive.set( <span class="string">'loading'</span>, <span class="literal">true</span> ) <span class="comment">// triggers loading animation</span>
]).then( <span class="function"><span class="keyword">function</span> <span class="params">( results )</span> {</span>
  <span class="keyword">var</span> ajaxData = results[<span class="number">0</span>];
  ractive.set({
    loading: <span class="literal">false</span>,
    list: ajaxData
  });
});</code></pre>
<h3 id="you-always-know-what-you-re-getting">You always know what you&#39;re getting</h3>
<p>It&#39;s often not obvious whether a callback will fire synchronously or asychronously. With promises, you don&#39;t have that problem. In practice, that often makes your code much easier to understand</p>
<h2 id="are-these-es6-promises-">Are these ES6 Promises?</h2>
<p>You may have heard that promises are going to be part of ES6 (the next version of JavaScript). In fact, recent versions of some browsers (e.g. Chrome and Firefox) already support the <code>Promise</code> object natively.</p>
<p>Future versions of Ractive will use native promises, with a polyfill included in the <a href="legacy-builds">legacy builds</a>. For now, because they&#39;re not sufficiently widely supported, Ractive uses its own implementation. It&#39;s functionally identical to the ES6 promise (as currently spec&#39;d) except that <code>Promise.race</code> and <code>Promise.cast</code> are not currently implemented.</p>

		</div>

		<aside class="left-nav">
			<section>
	<h1>Introduction</h1>
	<ul>
		<li><a href="get-started">Get started</a></li>
		<li><a href="tips">Tips</a></li>
		<li><a href="get-support">Get support</a></li>
		<li><a href="contributing">Contributing</a></li>
		<li><a href="get-started-with-node-js">Get started with node.js</a></li>
	</ul>
</section>

<section>
	<h1>API Reference</h1>
	<h2>new Ractive(...)</h2>
	<ul>
		<li><a href="initialisation-options">Initialisation options</a></li>
	</ul>

	<h2>Instance methods</h2>
	<ul>
		<li><a href="ractive-add">ractive.add()</a></li>
		<li><a href="ractive-animate">ractive.animate()</a></li>
		<li><a href="ractive-detach">ractive.detach()</a></li>
		<li><a href="ractive-find">ractive.find()</a></li>
		<li><a href="ractive-findall">ractive.findAll()</a></li>
		<li><a href="ractive-findallcomponents">ractive.findAllComponents()</a></li>
		<li><a href="ractive-findcomponent">ractive.findComponent()</a></li>
		<li><a href="ractive-fire">ractive.fire()</a></li>
		<li><a href="ractive-get">ractive.get()</a></li>
		<li><a href="ractive-insert">ractive.insert()</a></li>
		<li><a href="ractive-merge">ractive.merge()</a></li>
		<li><a href="ractive-observe">ractive.observe()</a></li>
		<li><a href="ractive-off">ractive.off()</a></li>
		<li><a href="ractive-on">ractive.on()</a></li>
		<li><a href="ractive-render">ractive.render()</a></li>
		<li><a href="ractive-reset">ractive.reset()</a></li>
		<li><a href="ractive-set">ractive.set()</a></li>
		<li><a href="ractive-subtract">ractive.subtract()</a></li>
		<li><a href="ractive-teardown">ractive.teardown()</a></li>
		<li><a href="ractive-toggle">ractive.toggle()</a></li>
		<li><a href="ractive-tohtml">ractive.toHTML()</a></li>
		<li><a href="ractive-update">ractive.update()</a></li>
		<li><a href="ractive-updatemodel">ractive.updateModel()</a></li>
	</ul>

	<h2>Instance properties</h2>
	<ul>
		<li><a href="ractive-nodes">ractive.nodes</a></li>
		<li><a href="ractive-transitions-instance">ractive.transitions</a></li>
		<li><a href="ractive-partials-instance">ractive.partials</a></li>
	</ul>

	<h2>Static methods</h2>
	<ul>
		<li><a href="ractive-parse">Ractive.parse()</a></li>
		<li><a href="ractive-extend">Ractive.extend()</a></li>
	</ul>

	<h2>Static properties</h2>
	<ul>
		<li><a href="ractive-defaults">Ractive.defaults</a></li>
	</ul>
</ul>

<section>
	<h1>Using plugins</h1>
	<ul>
		<li><a href="plugins">List of plugins</a></li>
		<li><a href="adaptors">Adaptors</a></li>
		<li><a href="decorators">Decorators</a></li>
		<li><a href="events">Events</a></li>
		<li><a href="transitions">Transitions</a></li>
	</ul>
</section>

<section>
	<h1>Writing plugins</h1>
	<ul>
		<li><a href="writing-adaptor-plugins">Adaptors</a></li>
		<li><a href="writing-decorator-plugins">Decorators</a></li>
		<li><a href="writing-event-plugins">Events</a></li>
		<li><a href="writing-transition-plugins">Transitions</a></li>
	</ul>
</section>

<section>
	<h1>Glossary</h1>
	<ul>
		<li><a href="array-modification">Array modification</a></li>
		<li><a href="components">Components</a></li>
		<li> <a href="computed-properties">Computed Properties</a></li>
		<li><a href="dependants">Dependants</a></li>
		<li><a href="expressions">Expressions</a></li>
		<li><a href="keypaths">Keypaths</a></li>
		<li><a href="magic-mode">Magic mode</a></li>
		<li><a href="mustaches">Mustaches</a></li>
		<li><a href="observers">Observers</a></li>
		<li><a href="parallel-dom">Parallel DOM</a></li>
		<li><a href="partials">Partials</a></li>
		<li><a href="promises">Promises</a></li>
		<li><a href="references">References</a></li>
		<li><a href="templates">Templates</a></li>
		<li><a href="two-way-binding">Two-way binding</a></li>
	</ul>
</section>

<section>
	<h1>Specific versions</h1>

	<ul>
		<li><a href='../edge'>edge</a></li>
		<li><a href='../0.7'>0.7</a></li>
		<li><a href='../0.6'>0.6</a></li>
		<li><a href='../0.5'>0.5</a></li>
		<li><a href='../0.4.0'>0.4.0</a></li>
		<li><a href='../0.3.9'>0.3.9</a></li>
	</ul>
</section>

		</aside>
	</main>

	<footer>
	<p>Ractive.js is a free and open source project released under the MIT license.</p>
</footer>


	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-5602942-6', 'ractivejs.org');
	ga('send', 'pageview');
</script>


	<script src='../assets/nav.js'></script>

</body>
</html>
