<!doctype html>
<html lang='en-GB'>
<head>
	<meta charset='utf-8'>
	<meta http-equiv='X-UA-Compatible' content='IE=Edge,chrome=1'>

	<title> Partials | Docs | Ractive.js </title >

	<meta name='viewport' content='width=device-width'>

	<link rel='icon' type='image/png' href='../assets/favicon.png'>
	<link rel='stylesheet' href='../min.css'>

	<!--[if lte IE 8]>
		<script src='../assets/respond.min.js'></script>
		<script src='../assets/html5shiv.min.js'></script>
	<![endif]-->

</head>

<body class='example'>

	<nav>
	<div class='nav-inner'>
		<a href='http://ractivejs.org'>Ractive.js</a>

		<ul>
			<li><a href='http://ractivejs.org/60-second-setup'>60 second setup</a></li>
			<li><a href='http://learn.ractivejs.org'>Tutorials</a></li>
			<li><a href='http://examples.ractivejs.org'>Examples</a></li>
			<li class="selected"><a href='http://docs.ractivejs.org'>Docs</a></li>
			<li><a href='http://docs.ractivejs.org/latest/plugins'>Plugins</a></li>
			<li><a href='http://blog.ractivejs.org'>Blog</a></li>
			<li class='github-small'><a href='https://github.com/ractivejs/ractive'>GitHub</a></li>
		</ul>

		<a class='github-wide' href='https://github.com/ractivejs/ractive'>GitHub</a>

		<button id='nav-toggle'>&#9776;</button>
	</div>
</nav>


	<main>
		<div class='content'>
			<header class='main-header'>
				<h1>Partials</h1>
				<a class='edit-link' href='https://github.com/ractivejs/docs.ractivejs.org/edit/master/docs/0.6/Partials.md.hbs'>edit this page</a>
			</header>

			<p>A partial is a template snippet which can be inserted into templates, or indeed other partials. They help to keep templates uncluttered and easy to read. In this example, we&#39;re creating a <code>{{&gt;thumbnail}}</code> partial:</p>
<pre><code class="language-html">&lt;!-- the main template --&gt;
&lt;div class=&#39;gallery&#39;&gt;
  {{#items}}
    {{&gt;thumbnail}}
  {{/items}}
&lt;/div&gt;</code></pre>
<pre><code class="language-html">&lt;!-- the partial --&gt;
&lt;figure class=&#39;thumbnail&#39;&gt;
  &lt;img src=&#39;assets/thumbnails/{{id}}.jpg&#39;&gt;
  &lt;figcaption&gt;{{description}}&lt;/figcaption&gt;
&lt;/figure&gt;</code></pre>
<ul>
<li><a href="#creation">Creating partials</a></li>
<li><a href="#expressions">Partial expressions</a></li>
<li><a href="#context">Partial context</a></li>
<li><a href="#recursion">Recursive partials</a></li>
<li><a href="#injection">Injecting partials</a></li>
<li><a href="#updating">Updating partials</a></li>
</ul>
<p><a name="creation"></a></p>
<h2 id="creating-partials">Creating partials</h2>
<p>There are several ways to use partials.</p>
<h3 id="as-an-initialisation-option">As an initialisation option</h3>
<p>You can specify partials when you create a Ractive instance:</p>
<pre><code class="language-js">ractive = <span class="keyword">new</span> Ractive({
  el: myContainer,
  template: myTemplate,
  partials: { thumbnail: myThumbnailPartial },
  data: { items: myItems }
});</code></pre>
<p>Here, <code>myThumbnailPartial</code> can be a <a href="templates">string template</a> or a <a href="preparsing">parsed template</a>.</p>
<h3 id="as-a-globally-available-partial">As a globally available partial</h3>
<p>Equally, you can make partials globally available by adding them to <a href="ractive-partials-global">Ractive.partials</a>:</p>
<pre><code class="language-js">Ractive.partials.thumbnail = myThumbnailPartial;</code></pre>
<p>Again, this can be a string template or parsed template - if a string, it will be parsed when it first gets used and stored as a parsed template thereafter.</p>
<h3 id="as-a-script-tag">As a script tag</h3>
<p>This method is particularly convenient if you don&#39;t want to load templates via AJAX:</p>
<pre><code class="language-html">&lt;script id=&#39;thumbnail&#39; type=&#39;text/ractive&#39;&gt;
  &lt;figure class=&#39;thumbnail&#39;&gt;
    &lt;img src=&#39;assets/thumbnails/{{id}}.jpg&#39;&gt;
    &lt;figcaption&gt;{{description}}&lt;/figcaption&gt;
  &lt;/figure&gt;
&lt;/script&gt;</code></pre>
<p>The <code>type</code> attribute isn&#39;t important, as long as it exists and isn&#39;t <code>text/javascript</code>. All that matters is that it&#39;s a script tag whose <code>id</code> attribute matches the name of the partial. It&#39;s fairly common to see Ractive templates in script tags with <code>type=&quot;text/ractive&quot;</code> to clearly indicate that they are meant to be handled by Ractive. It can be useful, though, to specify <code>type=&quot;text/html&quot;</code> since many text editors support HTML templates in script tags for templating purposes.</p>
<p>Internally, when a template requests the <code>{{&gt;thumbnail}}</code> partial, Ractive will look for it on <a href="ractive-partials-instance">ractive.partials</a>, then <a href="ractive-partials-global">Ractive.partials</a>, and if both of those fail it will then look for an element with an <code>id</code> of <code>thumbnail</code>. If it exists, it will parse its content and store it on <a href="ractive-partials-global">Ractive.partials</a>, to make subsequent lookups quicker.</p>
<h3 id="inline-partials">Inline partials</h3>
<p>It is also possible to embed partials within templates. Suppose you have a single <code>mainTemplate.html</code> file. You can define any partials within it by wrapping them in comments that follow this structure:</p>
<pre><code class="language-html">&lt;div class=&#39;gallery&#39;&gt;
  {{#items}}
    {{&gt;thumbnail}}
  {{/items}}
&lt;/div&gt;

&lt;!-- {{&gt;thumbnail}} --&gt;
&lt;figure class=&#39;thumbnail&#39;&gt;
  &lt;img src=&#39;assets/thumbnails/{{id}}.jpg&#39;&gt;
  &lt;figcaption&gt;{{description}}&lt;/figcaption&gt;
&lt;/figure&gt;
&lt;!-- {{/thumbnail}} --&gt;</code></pre>
<p>In this case, the <code>thumbnail</code> partial won&#39;t be globally available - it will only be available to Ractive instances that use this template.</p>
<p><a name="expressions"></a></p>
<h2 id="partial-expressions">Partial expressions</h2>
<p>Partial references may be a name that already exists as a partial, or they may also be any expression that resolves to a partial name. This can be used to select an appropriate partial based on the current context and more. The full power of Ractive&#39;s <a href="expressions">expressions</a> are available. If the value of the expression changes, the partial fragment will be re-rendered using the new partial.</p>
<p>If a partial expression is a simple reference and a partial exists with the same name as the reference, the expression will not be evaluated. Instead, the partial with the same name as the reference will be used. For instance, if there are partials named <code>foo</code> and <code>bar</code>, a data member <code>foo: &#39;bar&#39;</code>, and a partial section <code>{{&gt;foo}}</code>, the partial named <code>foo</code> will be used for the section because name-matching takes precedent over expression evaluation.</p>
<h4 id="example-item-specialization">Example: Item specialization</h4>
<pre><code class="language-html">{{#list}}{{&gt;.type}}{{/}}

&lt;!-- {{&gt;person}} --&gt;
  {{.name}} is a person. {{.pronoun}} has {{.fingerCount}} fingers.
&lt;!-- {{/person}} --&gt;

&lt;!-- {{&gt;animal}} --&gt;
  {{.name}} is a {{.specie}}. {{.pronoun}} has {{.legCount}} legs.
&lt;!-- {{/animal}} --&gt;</code></pre>
<p>This example uses a combination of patial expressions and restricted references in the iteration of <code>list</code> to render a different template based on the <code>type</code> of item in the list. If there was an item <code>{ type: &#39;person&#39;, name: &#39;John&#39;, pronoun: &#39;He&#39;, fingerCount: 9 }</code> in the list, its output would be <code>John is a person. He has 9 fingers.</code>. <code>{ type: &#39;animal&#39;, name: &#39;Alfred&#39;, specie: &#39;starfish&#39;, pronoun: &#39;It&#39;, legCount: 5 }</code> would output <code>Alfred is a starfish. It has 5 legs.</code>.</p>
<h4 id="example-partials-on-the-fly">Example: Partials on-the-fly</h4>
<pre><code class="language-html">&lt;script id=&quot;template&quot; type=&quot;text/ractive&quot;&gt;
  Add a partial: &lt;textarea value=&quot;{{tpl}}&quot; /&gt;&lt;button on-click=&quot;add()&quot;&gt;Add&lt;/button&gt;&lt;br/&gt;
  {{#list}}{{&gt;makePartial(.id, .template)}}{{/}}
&lt;/script&gt;</code></pre>
<pre><code class="language-js"><span class="keyword">new</span> Ractive({
  template: <span class="string">'#template'</span>,
  el: <span class="string">'main'</span>,
  data: {
    list: [],
    tpl: <span class="string">''</span>,
    makePartial: <span class="function"><span class="keyword">function</span><span class="params">(id, template)</span> {</span>
      <span class="keyword">var</span> key = <span class="string">'partial-'</span> + id;
      <span class="keyword">if</span> (!!<span class="keyword">this</span>.partials[key]) <span class="keyword">return</span> key;
      <span class="keyword">this</span>.partials[key] = template;
      <span class="keyword">return</span> key;
    }
  },
  add: <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    <span class="keyword">this</span>.push(<span class="string">'list'</span>, { id: Math.random(), template: <span class="keyword">this</span>.get(<span class="string">'tpl'</span>) });
    <span class="keyword">this</span>.set(<span class="string">'tpl'</span>, <span class="string">''</span>);
  }
});</code></pre>
<p>This example uses a function to generate a partial on-the-fly and return the new generated partial name to be rendered. Note that if the <code>template</code> value for any of the items in <code>list</code> changes, its corresponding partial will <strong>not</strong> be updated in this instance. If you need to achieve something like that, you could modify the function to wrap the partial content in a conditional and modify the cacheing logic to re-render the target partial when its template changed.</p>
<h3 id="invalid-names">Invalid names</h3>
<p>Since the partial name may be an expression, JavaScript keywords cannot be used in partial expressions. This means that <code>{{&gt;delete}}</code> is not valid. Keywords and other otherwise-invalid names may be used with a string expression such as <code>{{&gt;&#39;delete&#39;}}</code> or <code>{{&gt;&#39;invalid-name here&#39;}}</code>.</p>
<p><a name="context"></a></p>
<h2 id="partial-context">Partial context</h2>
<p>Partial sections may be given explicit context by adding an expression after the name in the form of <code>{{&gt;[name expression] [context expression]}}</code>. The partial will then be executed with the given context instead of the context in which the partial section appears. This has the same effect as wrapping the partial section in a <code>#with</code> section.</p>
<pre><code class="language-html">{{#list}}{{&gt;somePartial { item: ., magicNumber: 42 }}}{{/}}</code></pre>
<p>In this example, <code>{{item}}</code> in <code>somePartial</code> will resolve to the current item in <code>list</code> and <code>magicNumber</code> will resolve to <code>42</code>. Ancestor references, members, object literals, and any other expressions that resolve to an object may be used as a context expression.</p>
<p><a name="recursion"></a></p>
<h2 id="recursive-partials">Recursive partials</h2>
<p>Partials can be used <em>recursively</em>:</p>
<pre><code class="language-html">&lt;div class=&#39;fileSystem&#39;&gt;
  {{#root}}
    {{&gt;folder}}
  {{/root}}
&lt;/div&gt;

&lt;!-- {{&gt;folder}} --&gt;
&lt;ul class=&#39;folder&#39;&gt;
  {{#files}}
    {{&gt;file}}
  {{/files}}
&lt;/ul&gt;
&lt;!-- {{/folder}} --&gt;

&lt;!-- {{&gt;file}} --&gt;
&lt;li class=&#39;file&#39;&gt;
  &lt;img class=&#39;icon-{{type}}&#39;&gt;
  &lt;span&gt;{{filename}}&lt;/span&gt;

  &lt;!-- if this is actually a folder, embed the folder partial --&gt;
  {{# type === &#39;folder&#39; }}
    {{&gt;folder}}
  {{/ type === &#39;folder&#39; }}
&lt;/li&gt;
&lt;!-- {{/file}} --&gt;</code></pre>
<pre><code class="language-js">rv = <span class="keyword">new</span> Ractive({
  el: <span class="string">'container'</span>,
  template: <span class="string">'#myTemplate'</span>,
  data: {
    root: {
      files: [
        { type: <span class="string">'jpg'</span>, filename: <span class="string">'hello.jpg'</span> },
        { type: <span class="string">'mp3'</span>, filename: <span class="string">'NeverGonna.mp3'</span> },
        { type: <span class="string">'folder'</span>, filename: <span class="string">'subfolder'</span>, files: [
          { type: <span class="string">'txt'</span>, filename: <span class="string">'README.txt'</span> },
          { type: <span class="string">'folder'</span>, filename: <span class="string">'rabbithole'</span>, files: [
            { type: <span class="string">'txt'</span>, filename: <span class="string">'Inception.txt'</span> }
          ]}
        ]}
      ]
    }
  }
});</code></pre>
<p>In the example above, subfolders use the <code>{{&gt;folder}}</code> partial, which uses the <code>{{&gt;file}}</code> partial for each file, and if any of those files are folders, the <code>{{&gt;folder}}</code> partial will be invoked again, and so on until there are no more files.</p>
<p>Beware of cyclical data structures! Ractive makes no attempt to detect cyclicality, and will happily continue rendering partials until the <a href="http://en.wikipedia.org/wiki/Big_Crunch">Big Crunch</a> (or your browser exceeds its maximum call stack size. Whichever is sooner).</p>
<p><a name="injection"></a></p>
<h2 id="injecting-partials">Injecting partials</h2>
<p>One good use of partials is to vary the shape of a template according to some condition, the same way you might use <a href="http://en.wikipedia.org/wiki/Dependency_injection">dependency injection</a> elsewhere in your code.</p>
<p>For example, you might offer a different view to mobile users:</p>
<pre><code class="language-html">&lt;div class=&#39;main&#39;&gt;
  &lt;div class=&#39;content&#39;&gt;
    {{&gt;content}}
  &lt;/div&gt;

  &lt;div class=&#39;sidebar&#39;&gt;
    {{&gt;sidebar}}
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
<pre><code class="language-js">isMobile = <span class="regexp">/mobile/i</span>.test( navigator.userAgent ); <span class="comment">// please don't do this in real life!</span>

ractive = <span class="keyword">new</span> Ractive({
  el: myContainer,
  template: myTemplate,
  partials: {
    content: isMobile ? mobileContentPartial : desktopContentPartial,
    sidebar: isMobile ? mobileSidebarPartial : desktopSidebarPartial
  }
});</code></pre>
<p>Or you might make it possible to <a href="ractive-extend">extend</a> a subclass without overriding its template:</p>
<pre><code class="language-html">&lt;div class=&#39;modal-background&#39;&gt;
  &lt;div class=&#39;modal&#39;&gt;
    {{&gt;modalContent}}
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
<pre><code class="language-js"><span class="comment">// Create a Modal subclass</span>
Modal = Ractive.extend({
  template: modalTemplate,
  init: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="keyword">var</span> self = <span class="keyword">this</span>, resizeHandler;

    resizeHandler = <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
      self.center();
    };

    <span class="comment">// when the window resizes, keep the modal horizontally and vertically centred</span>
    window.addEventListener( <span class="string">'resize'</span>, resizeHandler );

    <span class="comment">// clean up after ourselves later</span>
    <span class="keyword">this</span>.on( <span class="string">'teardown'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
      window.removeEventListener( <span class="string">'resize'</span>, resizeHandler );
    });

    <span class="comment">// manually call this.center() the first time</span>
    <span class="keyword">this</span>.center();
  },
  center: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
    <span class="comment">// centering logic goes here</span>
  }
});

helloModal = <span class="keyword">new</span> Modal({
  el: document.body,
  partials: {
    modalContent: <span class="string">'&lt;p&gt;Hello!&lt;/p&gt;&lt;a class="modal-button" proxy-tap="close"&gt;Close&lt;/a&gt;'</span>
  }
});

helloModal.on( <span class="string">'close'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
  <span class="keyword">this</span>.teardown();
});</code></pre>
<p><a name="updating"></a></p>
<h2 id="updating-partials">Updating Partials</h2>
<p>Partials may be updated after they are rendered if they are held within a conditional section. They will be re-parsed each time they are re-rendered, if necessary, so string, pre-parsed, and function partials may be used.</p>
<pre><code class="language-html">{{^toggle}}{{&gt;rickroll}}{{/}}</code></pre>
<pre><code class="language-js">ractive.partials.rickroll = <span class="string">'I wouldn\'t do that to you, chum.'</span>;
ractive.set(<span class="string">'toggle'</span>, <span class="literal">true</span>);
ractive.set(<span class="string">'toggle'</span>, <span class="literal">false</span>);</code></pre>
<p>This is a little hacky, but it brings an element of dynamism that can be very useful.</p>

		</div>

		<aside class="left-nav">
			<section>
	<h1>Introduction</h1>
	<ul>
		<li><a href="get-started">Get started</a></li>
		<li><a href="tips">Tips</a></li>
		<li><a href="get-support">Get support</a></li>
		<li><a href="contributing">Contributing</a></li>
		<li><a href="get-started-with-node-js">Get started with node.js</a></li>
		<li><a href="migrating">Migrating from previous versions</a></li>
	</ul>
</section>

<section>
	<h1>Configuration</h1>
	<ul>
		<li><a href="options">Options</a></li>
		<li><a href="ractive-defaults">Defaults</a></li>
		<li><a href="advanced-configuration">Advanced configuration</a></li>
	</ul>
</section>
<section>
	<h1>Core Concepts</h1>
	<h2>Templates</h2>
	<ul>
		<li><a href="templates">Templates</a></li>
		<li><a href="mustaches">Mustaches</a></li>
		<li><a href="references">References</a></li>
		<li><a href="expressions">Expressions</a></li>
		<li><a href="keypaths">Keypaths</a></li>
		<li><a href="partials">Partials</a></li>
		<li><a href="decorators">Decorators</a></li>
	</ul>
	<h2>Data & Binding</h2>
	<ul>
		<li><a href="two-way-binding">Two-way binding</a></li>
		<li><a href="magic-mode">Magic mode</a></li>
		<li><a href="dependants">Dependants</a></li>
		<li><a href="array-modification">Array modification</a></li>
		<li><a href="computed-properties">Computed Properties</a></li>
		<li><a href="observers">Observers</a></li>
		<li><a href="adaptors">Adaptors</a></li>
		<li><a href="parallel-dom">Parallel DOM</a></li>
	</ul>
	<h2>Events</h2>
	<ul>
		<li><a href="events-overview">Overview</a></li>
		<li><a href="event-directives">Event directives</a></li>
		<li><a href="proxy-events">Proxy events</a></li>
		<li><a href="method-calls">Method calls</a></li>
		<li><a href="publish-subscribe">Publish/subscribe</a></li>
		<li><a href="event-bubbling">Event bubbling</a></li>
		<li><a href="lifecycle-events">Lifecycle events</a></li>
	</ul>
	<h2>Transitions and Animations</h2>
	<ul>
		<li><a href="transitions">Transitions</a></li>
		<li><a href="promises">Promises</a></li>
		<li><a href="ractive-easing">Easings</a></li>
	</ul>
	<h2>Components</h2>
	<ul>
		<li><a href="components">Components</a></li>
	</ul>
</section>
<section>
	<h1>API Reference</h1>
	<h2>Constructor</h2>
	<ul>
		<li><a href="new-ractive">new Ractive(...)</a></li>
	</ul>
	<h2>Instance methods</h2>
	<ul>
		<li><a href="ractive-add">ractive.add()</a></li>
		<li><a href="ractive-animate">ractive.animate()</a></li>
		<li><a href="ractive-detach">ractive.detach()</a></li>
		<li><a href="ractive-find">ractive.find()</a></li>
		<li><a href="ractive-findall">ractive.findAll()</a></li>
		<li><a href="ractive-findallcomponents">ractive.findAllComponents()</a></li>
		<li><a href="ractive-findcomponent">ractive.findComponent()</a></li>
		<li><a href="ractive-fire">ractive.fire()</a></li>
		<li><a href="ractive-get">ractive.get()</a></li>
		<li><a href="ractive-insert">ractive.insert()</a></li>
		<li><a href="ractive-merge">ractive.merge()</a></li>
		<li><a href="ractive-observe">ractive.observe()</a></li>
		<li><a href="ractive-off">ractive.off()</a></li>
		<li><a href="ractive-on">ractive.on()</a></li>
		<li><a href="ractive-pop">ractive.pop()</a></li>
		<li><a href="ractive-push">ractive.push()</a></li>
		<li><a href="ractive-render">ractive.render()</a></li>
		<li><a href="ractive-reset">ractive.reset()</a></li>
		<li><a href="ractive-set">ractive.set()</a></li>
		<li><a href="ractive-shift">ractive.shift()</a></li>
		<li><a href="ractive-splice">ractive.splice()</a></li>
		<li><a href="ractive-subtract">ractive.subtract()</a></li>
		<li><a href="ractive-teardown">ractive.teardown()</a></li>
		<li><a href="ractive-toggle">ractive.toggle()</a></li>
		<li><a href="ractive-tohtml">ractive.toHTML()</a></li>
		<li><a href="ractive-unrender">ractive.unrender()</a></li>
		<li><a href="ractive-unshift">ractive.unshift()</a></li>
		<li><a href="ractive-update">ractive.update()</a></li>
		<li><a href="ractive-updatemodel">ractive.updateModel()</a></li>
	</ul>
	<h2>Instance properties</h2>
	<ul>
		<li><a href="ractive-nodes">ractive.nodes</a></li>
		<li><a href="ractive-transitions-instance">ractive.transitions</a></li>
		<li><a href="ractive-partials-instance">ractive.partials</a></li>
	</ul>
	<h2>Static methods</h2>
	<ul>
		<li><a href="ractive-extend">Ractive.extend()</a></li>
		<li><a href="ractive-parse">Ractive.parse()</a></li>
	</ul>
	<h2>Static properties</h2>
	<ul>
		<li><a href="ractive-defaults">Ractive.defaults</a></li>
		<li><a href="ractive-easing">Ractive.easing</a></li>
	</ul>
</ul>
</section>
<section>
	<h1>Plugins</h1>
	<h2>Using</h2>
	<ul>
		<li><a href="plugins">List of plugins</a></li>
	</ul>
	<h2>Writing</h2>
	<ul>
		<li><a href="writing-adaptor-plugins">Adaptors</a></li>
		<li><a href="writing-decorator-plugins">Decorators</a></li>
		<li><a href="writing-event-plugins">Events</a></li>
		<li><a href="writing-transition-plugins">Transitions</a></li>
	</ul>
</section>

<section>
	<h1>Specific versions</h1>

	<ul>
		<li><a href='../edge'>edge</a></li>
		<li><a href='../0.7'>0.7</a></li>
		<li><a href='../0.6'>0.6</a></li>
		<li><a href='../0.5'>0.5</a></li>
		<li><a href='../0.4.0'>0.4.0</a></li>
		<li><a href='../0.3.9'>0.3.9</a></li>
	</ul>
</section>

		</aside>
	</main>

	<footer>
	<p>Ractive.js is a free and open source project released under the MIT license.</p>
</footer>


	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-5602942-6', 'ractivejs.org');
	ga('send', 'pageview');
</script>


	<script src='../assets/nav.js'></script>

</body>
</html>
